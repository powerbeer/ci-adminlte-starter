/*
 jQuery Upload File Plugin
 version: 4.0.11
 @requires jQuery v1.5 or later & form plugin
 Copyright (c) 2013 Ravishanker Kusuma
 http://hayageek.com/
*/
(function(d){void 0==d.fn.ajaxForm&&d.getScript(("https:"==document.location.protocol?"https://":"http://")+"malsup.github.io/jquery.form.js");var E=void 0!==d("<input type='file'/>").get(0).files;var q=void 0!==window.FormData;d.fn.uploadFile=function(F){function y(){u||(u=!0,function b(){f.sequential||(f.sequentialCount=99999);if(0==l.length&&0==p.length)f.afterUploadAll&&f.afterUploadAll(e),u=!1;else{if(p.length<f.sequentialCount){var a=l.shift();void 0!=a&&(p.push(a),a.removeClass(e.formGroup),
a.submit())}window.setTimeout(b,100)}}())}function G(c,b,a){a.on("dragenter",function(a){a.stopPropagation();a.preventDefault();d(this).addClass(b.dragDropHoverClass)});a.on("dragover",function(a){a.stopPropagation();a.preventDefault();a=d(this);a.hasClass(b.dragDropContainerClass)&&!a.hasClass(b.dragDropHoverClass)&&a.addClass(b.dragDropHoverClass)});a.on("drop",function(a){a.preventDefault();d(this).removeClass(b.dragDropHoverClass);c.errorLog.html("");a=a.originalEvent.dataTransfer.files;!b.multiple&&
1<a.length?b.showError&&d("<div class='"+b.errorClass+"'>"+b.multiDragErrorStr+"</div>").appendTo(c.errorLog):0!=b.onSelect(a)&&v(b,c,a)});a.on("dragleave",function(a){d(this).removeClass(b.dragDropHoverClass)});d(document).on("dragenter",function(a){a.stopPropagation();a.preventDefault()});d(document).on("dragover",function(a){a.stopPropagation();a.preventDefault();a=d(this);a.hasClass(b.dragDropContainerClass)||a.removeClass(b.dragDropHoverClass)});d(document).on("drop",function(a){a.stopPropagation();
a.preventDefault();d(this).removeClass(b.dragDropHoverClass)})}function w(c){c/=1024;return 1024<parseInt(c)?(c/1024).toFixed(2)+" MB":c.toFixed(2)+" KB"}function z(c){c="string"==jQuery.type(c)?c.split("&"):d.param(c).split("&");var b=c.length,a=[],g;for(g=0;g<b;g++){c[g]=c[g].replace(/\+/g," ");var h=c[g].split("=");a.push([decodeURIComponent(h[0]),decodeURIComponent(h[1])])}return a}function v(c,b,a){for(var g=0;g<a.length;g++)if(A(b,c,a[g].name)){var h;if(h=!c.allowDuplicates){h=b;var m=a[g].name,
e=!1;if(h.existingFileNames.length)for(var k=0;k<h.existingFileNames.length;k++)if(h.existingFileNames[k]==m||f.duplicateStrict&&h.existingFileNames[k].toLowerCase()==m.toLowerCase())e=!0;h=e}if(h)c.showError&&d("<div class='"+c.errorClass+"'><b>"+a[g].name+"</b> "+c.duplicateErrorStr+"</div>").appendTo(b.errorLog);else if(-1!=c.maxFileSize&&a[g].size>c.maxFileSize)c.showError&&d("<div class='"+c.errorClass+"'><b>"+a[g].name+"</b> "+c.sizeErrorStr+w(c.maxFileSize)+"</div>").appendTo(b.errorLog);else if(-1!=
c.maxFileCount&&b.selectedFiles>=c.maxFileCount)c.showError&&d("<div class='"+c.errorClass+"'><b>"+a[g].name+"</b> "+c.maxFileCountErrorStr+c.maxFileCount+"</div>").appendTo(b.errorLog);else{b.selectedFiles++;b.existingFileNames.push(a[g].name);h=d.extend({},c);m=new FormData;e=c.fileName.replace("[]","");m.append(e,a[g]);if(e=c.formData)for(e=z(e),k=0;k<e.length;k++)e[k]&&m.append(e[k][0],e[k][1]);h.fileData=m;m=new x(b,c);e=c.showFileCounter?b.fileCounter+c.fileCounterStyle+a[g].name:a[g].name;
c.showFileSize&&(e+=" ("+w(a[g].size)+")");m.filename.html(e);e=d("<form style='display:block; position:absolute;left: 150px;' class='"+b.formGroup+"' method='"+c.method+"' action='"+c.url+"' enctype='"+c.enctype+"'></form>");e.appendTo("body");k=[];k.push(a[g].name);B(e,h,m,k,b,a[g]);b.fileCounter++}}else c.showError&&d("<div class='"+c.errorClass+"'><b>"+a[g].name+"</b> "+c.extErrorStr+c.allowedTypes+"</div>").appendTo(b.errorLog)}function A(c,b,a){c=b.allowedTypes.toLowerCase().split(/[\s,]+/g);
a=a.split(".").pop().toLowerCase();return"*"!=b.allowedTypes&&0>jQuery.inArray(a,c)?!1:!0}function r(c,b){if(c.existingFileNames.length)for(var a=0;a<b.length;a++){var d=c.existingFileNames.indexOf(b[a]);-1!=d&&c.existingFileNames.splice(d,1)}}function H(c,b){if(c){b.show();var a=new FileReader;a.onload=function(a){b.attr("src",a.target.result)};a.readAsDataURL(c)}}function n(c,b){if(c.showFileCounter){var a=d(b.container).find(".ajax-file-upload-filename").length;b.fileCounter=a+1;d(b.container).find(".ajax-file-upload-filename").each(function(b,
e){b=d(this).html().split(c.fileCounterStyle);parseInt(b[0]);b=a+c.fileCounterStyle+b[1];d(this).html(b);a--})}}function C(c,b,a,g){var e="ajax-upload-id-"+(new Date).getTime(),f=d("<form method='"+a.method+"' action='"+a.url+"' enctype='"+a.enctype+"'></form>"),l="<input type='file' id='"+e+"' name='"+a.fileName+"' accept='"+a.acceptFiles+"'/>";a.multiple&&(a.fileName.indexOf("[]")!=a.fileName.length-2&&(a.fileName+="[]"),l="<input type='file' id='"+e+"' name='"+a.fileName+"' accept='"+a.acceptFiles+
"' multiple/>");var k=d(l).appendTo(f);k.change(function(){c.errorLog.html("");a.allowedTypes.toLowerCase().split(",");var e=[];if(this.files){for(h=0;h<this.files.length;h++)e.push(this.files[h].name);if(0==a.onSelect(this.files))return}else{var k=d(this).val();h=[];e.push(k);if(!A(c,a,k)){a.showError&&d("<div class='"+a.errorClass+"'><b>"+k+"</b> "+a.extErrorStr+a.allowedTypes+"</div>").appendTo(c.errorLog);return}h.push({name:k,size:"NA"});if(0==a.onSelect(h))return}n(a,c);g.unbind("click");f.hide();
C(c,b,a,g);f.addClass(b);if(a.serialize&&E&&q)f.removeClass(b),e=this.files,f.remove(),v(a,c,e);else{k="";for(var h=0;h<e.length;h++)k=a.showFileCounter?k+(c.fileCounter+a.fileCounterStyle+e[h]+"<br>"):k+(e[h]+"<br>"),c.fileCounter++;-1!=a.maxFileCount&&c.selectedFiles+e.length>a.maxFileCount?a.showError&&d("<div class='"+a.errorClass+"'><b>"+k+"</b> "+a.maxFileCountErrorStr+a.maxFileCount+"</div>").appendTo(c.errorLog):(c.selectedFiles+=e.length,h=new x(c,a),h.filename.html(k),B(f,a,h,e,c,null))}});
a.nestedForms?(f.css({margin:0,padding:0}),g.css({position:"relative",overflow:"hidden",cursor:"default"}),k.css({position:"absolute",cursor:"pointer",top:"0px",width:"100%",height:"100%",left:"0px","z-index":"100",opacity:"0.0",filter:"alpha(opacity=0)","-ms-filter":"alpha(opacity=0)","-khtml-opacity":"0.0","-moz-opacity":"0.0"}),f.appendTo(g)):(f.appendTo(d("body")),f.css({margin:0,padding:0,display:"block",position:"absolute",left:"-250px"}),-1!=navigator.appVersion.indexOf("MSIE ")?g.attr("for",
e):g.click(function(){k.click()}))}function I(c,b){this.statusbar=d("<div class='ajax-file-upload-statusbar'></div>").width(b.statusBarWidth);this.preview=d("<img class='ajax-file-upload-preview' />").width(b.previewWidth).height(b.previewHeight).appendTo(this.statusbar).hide();this.filename=d("<div class='ajax-file-upload-filename'></div>").appendTo(this.statusbar);this.progressDiv=d("<div class='ajax-file-upload-progress'>").appendTo(this.statusbar).hide();this.progressbar=d("<div class='ajax-file-upload-bar'></div>").appendTo(this.progressDiv);
this.abort=d("<div>"+b.abortStr+"</div>").appendTo(this.statusbar).hide();this.cancel=d("<div>"+b.cancelStr+"</div>").appendTo(this.statusbar).hide();this.done=d("<div>"+b.doneStr+"</div>").appendTo(this.statusbar).hide();this.download=d("<div>"+b.downloadStr+"</div>").appendTo(this.statusbar).hide();this.del=d("<div>"+b.deleteStr+"</div>").appendTo(this.statusbar).hide();this.abort.addClass("ajax-file-upload-red");this.done.addClass("ajax-file-upload-green");this.download.addClass("ajax-file-upload-green");
this.cancel.addClass("ajax-file-upload-red");this.del.addClass("ajax-file-upload-red");return this}function x(c,b){var a=b.customProgressBar?new b.customProgressBar(c,b):new I(c,b);a.abort.addClass(c.formGroup);a.abort.addClass(b.abortButtonClass);a.cancel.addClass(c.formGroup);a.cancel.addClass(b.cancelButtonClass);b.extraHTML&&(a.extraHTML=d("<div class='extrahtml'>"+b.extraHTML()+"</div>").insertAfter(a.filename));"bottom"==b.uploadQueueOrder?d(c.container).append(a.statusbar):d(c.container).prepend(a.statusbar);
return a}function B(c,b,a,e,h,f){var g={cache:!1,contentType:!1,processData:!1,forceSync:!1,type:b.method,data:b.formData,formData:b.fileData,dataType:b.returnType,headers:b.headers,beforeSubmit:function(k,f,g){if(0!=b.onSubmit.call(this,e)){if(b.dynamicFormData&&(k=z(b.dynamicFormData())))for(f=0;f<k.length;f++)k[f]&&(b.serialize&&void 0!=b.fileData?g.formData.append(k[f][0],k[f][1]):g.data[k[f][0]]=k[f][1]);b.extraHTML&&d(a.extraHTML).find("input,select,textarea").each(function(a,c){b.serialize&&
void 0!=b.fileData?g.formData.append(d(this).attr("name"),d(this).val()):g.data[d(this).attr("name")]=d(this).val()});return!0}a.statusbar.append("<div class='"+b.errorClass+"'>"+b.uploadErrorStr+"</div>");a.cancel.show();c.remove();a.cancel.click(function(){l.splice(l.indexOf(c),1);r(h,e);a.statusbar.remove();b.onCancel.call(h,e,a);h.selectedFiles-=e.length;n(b,h)});return!1},beforeSend:function(c,d){for(var f in d.headers)c.setRequestHeader(f,d.headers[f]);a.progressDiv.show();a.cancel.hide();a.done.hide();
b.showAbort&&(a.abort.show(),a.abort.click(function(){r(h,e);c.abort();h.selectedFiles-=e.length;b.onAbort.call(h,e,a)}));q?a.progressbar.width("1%"):a.progressbar.width("5%")},uploadProgress:function(c,d,e,f){98<f&&(f=98);c=f+"%";1<f&&a.progressbar.width(c);b.showProgress&&(a.progressbar.html(c),a.progressbar.css("text-align","center"))},success:function(f,g,m){a.cancel.remove();p.pop();"json"==b.returnType&&"object"==d.type(f)&&f.hasOwnProperty(b.customErrorKeyStr)?(a.abort.hide(),g=f[b.customErrorKeyStr],
b.onError.call(this,e,200,g,a),b.showStatusAfterError?(a.progressDiv.hide(),a.statusbar.append("<span class='"+b.errorClass+"'>ERROR: "+g+"</span>")):(a.statusbar.hide(),a.statusbar.remove()),h.selectedFiles-=e.length):(h.responses.push(f),a.progressbar.width("100%"),b.showProgress&&(a.progressbar.html("100%"),a.progressbar.css("text-align","center")),a.abort.hide(),b.onSuccess.call(this,e,f,m,a),b.showStatusAfterSuccess?(b.showDone?(a.done.show(),a.done.click(function(){a.statusbar.hide("slow");
a.statusbar.remove()})):a.done.hide(),b.showDelete?(a.del.show(),a.del.click(function(){r(h,e);a.statusbar.hide().remove();b.deleteCallback&&b.deleteCallback.call(this,f,a);h.selectedFiles-=e.length;n(b,h)})):a.del.hide()):(a.statusbar.hide("slow"),a.statusbar.remove()),b.showDownload&&(a.download.show(),a.download.click(function(){b.downloadCallback&&b.downloadCallback(f,a)})));c.remove()},error:function(d,f,g){a.cancel.remove();p.pop();a.abort.hide();"abort"==d.statusText?(a.statusbar.hide("slow").remove(),
n(b,h)):(b.onError.call(this,e,f,g,a),b.showStatusAfterError?(a.progressDiv.hide(),a.statusbar.append("<span class='"+b.errorClass+"'>ERROR: "+g+"</span>")):(a.statusbar.hide(),a.statusbar.remove()),h.selectedFiles-=e.length);c.remove()}};b.showPreview&&null!=f&&"image"==f.type.toLowerCase().split("/").shift()&&H(f,a.preview);b.autoSubmit?(c.ajaxForm(g),l.push(c),y()):(b.showCancel&&(a.cancel.show(),a.cancel.click(function(){l.splice(l.indexOf(c),1);r(h,e);c.remove();a.statusbar.remove();b.onCancel.call(h,
e,a);h.selectedFiles-=e.length;n(b,h)})),c.ajaxForm(g))}var f=d.extend({url:"",method:"POST",enctype:"multipart/form-data",returnType:null,allowDuplicates:!0,duplicateStrict:!1,allowedTypes:"*",acceptFiles:"*",fileName:"file",formData:!1,dynamicFormData:!1,maxFileSize:2824E4,maxFileCount:10,multiple:!0,dragDrop:!0,autoSubmit:!0,showCancel:!0,showAbort:!0,showDone:!1,showDelete:!1,showError:!0,showStatusAfterSuccess:!0,showStatusAfterError:!0,showFileCounter:!0,fileCounterStyle:"). ",showFileSize:!0,
showProgress:!1,nestedForms:!0,showDownload:!1,onLoad:function(c){},onSelect:function(c){return!0},onSubmit:function(c,b){},onSuccess:function(c,b,a,d){},onError:function(c,b,a,d){},onCancel:function(c,b){},onAbort:function(c,b){},downloadCallback:!1,deleteCallback:!1,afterUploadAll:!1,serialize:!0,sequential:!1,sequentialCount:2,customProgressBar:!1,abortButtonClass:"ajax-file-upload-abort",cancelButtonClass:"ajax-file-upload-cancel",dragDropContainerClass:"ajax-upload-dragdrop",dragDropHoverClass:"state-hover",
errorClass:"ajax-file-upload-error",uploadButtonClass:"ajax-file-upload",dragDropStr:"<span><b>Drag &amp; Drop Files</b></span>",uploadStr:"\u0e2d\u0e31\u0e1b\u0e42\u0e2b\u0e25\u0e14",abortStr:"\u0e22\u0e01\u0e40\u0e25\u0e34\u0e01",cancelStr:"\u0e22\u0e01\u0e40\u0e25\u0e34\u0e01",deleteStr:"\u0e25\u0e1a",doneStr:"Done",multiDragErrorStr:"Multiple File Drag &amp; Drop is not allowed.",extErrorStr:"\u0e0a\u0e19\u0e34\u0e14\u0e44\u0e1f\u0e25\u0e4c\u0e44\u0e21\u0e48\u0e16\u0e39\u0e01\u0e15\u0e49\u0e2d\u0e07: ",
duplicateErrorStr:" \u0e44\u0e1f\u0e25\u0e4c\u0e19\u0e35\u0e49\u0e16\u0e39\u0e01\u0e2d\u0e31\u0e1b\u0e42\u0e2b\u0e25\u0e14\u0e02\u0e36\u0e49\u0e19\u0e44\u0e1b\u0e41\u0e25\u0e49\u0e27.",sizeErrorStr:" \u0e44\u0e1f\u0e25\u0e4c\u0e21\u0e35\u0e02\u0e19\u0e32\u0e14\u0e40\u0e01\u0e34\u0e19\u0e01\u0e33\u0e2b\u0e19\u0e14 : ",uploadErrorStr:"\u0e1f\u0e31\u0e07\u0e0a\u0e31\u0e48\u0e19\u0e01\u0e32\u0e23\u0e2d\u0e31\u0e1b\u0e42\u0e2b\u0e25\u0e14\u0e22\u0e31\u0e07\u0e44\u0e21\u0e48\u0e40\u0e01\u0e34\u0e14\u0e43\u0e2b\u0e49\u0e1a\u0e23\u0e34\u0e01\u0e32\u0e23",
maxFileCountErrorStr:" \u0e08\u0e33\u0e19\u0e27\u0e19\u0e44\u0e1f\u0e25\u0e4c\u0e17\u0e35\u0e48\u0e2d\u0e31\u0e1b\u0e42\u0e2b\u0e25\u0e14\u0e21\u0e35\u0e21\u0e32\u0e01\u0e40\u0e01\u0e34\u0e19\u0e44\u0e1b :",downloadStr:"\u0e14\u0e39\u0e40\u0e2d\u0e01\u0e2a\u0e32\u0e23",customErrorKeyStr:"jquery-upload-file-error",showQueueDiv:!1,statusBarWidth:"100%",dragdropWidth:"100%",showPreview:!1,previewHeight:"auto",previewWidth:"100%",extraHTML:!1,uploadQueueOrder:"top",headers:{}},F);this.fileCounter=1;this.selectedFiles=
0;var D="ajax-file-upload-"+(new Date).getTime();this.formGroup=D;this.errorLog=d("<div></div>");this.responses=[];this.existingFileNames=[];q||(f.dragDrop=!1);q&&1!==f.maxFileCount||(f.multiple=!1);d(this).html("");var e=this,t=d("<div>"+f.uploadStr+"</div>");d(t).addClass(f.uploadButtonClass);(function b(){if(d.fn.ajaxForm){if(f.dragDrop){var a=d('<div class="'+f.dragDropContainerClass+'" style="vertical-align:top;"></div>').width(f.dragdropWidth);d(e).append(a);d(a).append(t);d(a).append(d(f.dragDropStr));
G(e,f,a)}else d(e).append(t);d(e).append(e.errorLog);e.container=f.showQueueDiv?d("#"+f.showQueueDiv):d("<div class='ajax-file-upload-container'></div>").insertAfter(d(e));f.onLoad.call(this,e);C(e,D,f,t)}else window.setTimeout(b,10)})();this.startUpload=function(){d("form").each(function(b,a){d(this).hasClass(e.formGroup)&&l.push(d(this))});1<=l.length&&y()};this.getFileCount=function(){return e.selectedFiles};this.stopUpload=function(){d("."+f.abortButtonClass).each(function(b,a){d(this).hasClass(e.formGroup)&&
d(this).click()});d("."+f.cancelButtonClass).each(function(b,a){d(this).hasClass(e.formGroup)&&d(this).click()})};this.cancelAll=function(){d("."+f.cancelButtonClass).each(function(b,a){d(this).hasClass(e.formGroup)&&d(this).click()})};this.update=function(b){f=d.extend(f,b);b.hasOwnProperty("url")&&d("form").each(function(a,e){d(this).attr("action",b.url)})};this.enqueueFile=function(b){b instanceof File&&v(f,e,[b])};this.reset=function(b){e.fileCounter=1;e.selectedFiles=0;e.errorLog.html("");0!=
b&&e.container.html("")};this.remove=function(){e.container.html("");d(e).remove()};this.createProgress=function(b,a,d,h){var g=new x(this,f);g.progressDiv.show();g.progressbar.width("100%");var l="";l=f.showFileCounter?e.fileCounter+f.fileCounterStyle+a:a;f.showFileSize&&(l+=" ("+w(h)+")");g.filename.html(l);e.fileCounter++;e.selectedFiles++;f.showPreview&&(g.preview.attr("src",d),g.preview.show());f.showDownload&&(g.download.show(),g.download.click(function(){f.downloadCallback&&f.downloadCallback.call(e,
[b],g)}));f.showDelete&&(g.del.show(),g.del.click(function(){g.statusbar.hide().remove();var a=[b];f.deleteCallback&&f.deleteCallback.call(this,a,g);--e.selectedFiles;n(f,e)}));return g};this.getResponses=function(){return this.responses};var l=[],p=[],u=!1;return this}})(jQuery);